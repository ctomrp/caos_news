{% extends 'layouts/base.html' %}

{% block content %}

<h1>Estado de noticia</h1>
<br>
    <table class="table table-striped table-hover shadow-lg mb-5">
        <thead>
          <tr>
            <th scope="col">#id</th>
            <th scope="col">Título</th>
            <th scope="col">Editor</th>
            <th scope="col">Estado</th>
            <th scope="col">Opción</th>
          </tr>
        </thead>
        <tbody>
          {% for item in news %}
          {% if request.user.is_authenticated and user.id == item.author.id and perms.core.add_news %}
          <tr class="n_fila">
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ item.title }}</td>
            <td>{{ item.author }}</td>
            <td>{{ item.state }}</td>
            {% if item.state.id == 3 %}
            <td><a class="btn btn-warning shadow" href="{% url 'news_detail' item.id %}" role="button">Ver detalle</a>
              {% else %}
              <td><a class="btn btn-primary shadow" href="{% url 'news_detail' item.id %}" role="button">Ver noticia</a>
              {% endif %}
            </td>
          </tr>
          {% elif request.user.is_authenticated and perms.core.change_newsstate %}
          <tr class="n_fila">
            <th scope="row">{{ forloop.counter }}</th>
            <td>{{ item.title }}</td>
            <td>{{ item.author }}</td>
            <td>{{ item.state }}</td>
            {% if item.state.id == 3 %}
            <td><a class="btn btn-warning shadow" href="{% url 'news_detail' item.id %}" role="button">Ver detalle</a>
              {% else %}
              <td><a class="btn btn-primary shadow" href="{% url 'news_detail' item.id %}" role="button">Ver noticia</a>
              {% endif %}
            </td>
          </tr>
          {% endif %}
          {% endfor %}
        </tbody>
      </table>
      
      {% endblock %}